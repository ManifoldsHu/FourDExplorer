The schema of metadata of datasets manipulated by 4D-Explorer.

Note that only basical parameters will be stored (e.g. accelerate_voltage), while other parameters will be calculated in time (e.g. wave_length)

The metadata is organized as a tree. Branch nodes should use Upper Letters, while leaf nodes should use lower letters. (Although in programs, we will not use this regular to distinguish whether a node is a leaf)


.4dstem     metadata structure

General/
    title                   str         initialized by dataset name, but not necessarily the same.
    original_name           str         original file name without extension
    original_path           str         original file path
    authors                 str         in LaTeX format, i.e. Surname1, Name1 and Surname2, Name2 and ...
    notes                   str         may support rich text (html?)
    time                    str         creation time in ISO 8601, 13:29:10
    date                    str         creation date in ISO 8601, 2018-01-28
    time_zone               str         supported by the python-dateutil library, the same as the system
    doi                     str         

FileIO/
    fourd_explorer_version  str         e.g. 0.5.2

AcquisitionInstrument/Microscope/
    name                    str         e.g. Titan3 Cubed 60-300
    manufacturer            str         e.g. FEI 
    beam_current            float       A       nA 
    accelerate_voltage      float       V       kV
    probe_area              float       m^2     nm^2
    camera_length           float       m       mm
    convergence_angle       float       rad     mrad        alpha/convergent semi-angle 
    magnification           float
    dwell_time              float       s       ms          
    step_size_i             float       m       nm 
    step_size_j             float       m       nm 

AcquisitionInstrument/Camera/
    name                    str         e.g. EMPAD 
    manufacturer            str         e.g. FEI 
    pixel_number_i          int         
    pixel_number_j          int 
    pixel_size_i            float       m       um
    pixel_size_j            float       m       um          

AcquisitionInstrument/Stage/
    (Not Implemented)
    tilt_alpha              float       mrad    deg 
    tilt_beta               float       mrad    deg 
    rotation                float       mrad    deg 
    x                       float       m       mm 
    y                       float       m       mm 
    z                       float       m       mm 

Calibration/Space/
    du_i                    float       m^-1    nm^-1       pixel size of the diffraction space, can be calibrated by alpha / wave_length / bright_field_disk_radius (in pixel). Note that dr_i and dr_j can be induced from du_i and du_j, and are not equal to scan_dr_i and scan_dr_j.
    du_j                    float       m^-1    nm^-1       pixel size of the diffraction space, can be calibrated by alpha / wave_length / bright_field_disk_radius(in pixel) 
    scan_dr_i               float       m       nm          equal to scan_step_size_i (only to be displayed)
    scan_dr_j               float       m       nm          equal to scan_step_size_j (only to be displayed)
    dr_i                    float       m       nm          equal to wave_length * bright_field_disk_radius (in pixel) / alpha / dp_i (only to be displayed)
    dr_j                    float       m       nm          equal to wave_length * bright_field_disk_radius (in pixel) / alpha / dp_j (only to be displayed)
    dp_i                    int         pixel number (only to be displayed) 
    dp_j                                pixel number (only to be displayed)
    scan_i                  int         pixel number (only to be displayed)
    scan_j                  int         pixel number (only to be displayed)

Calibration/RotationalOffsetCorrection/
    scan_rotation           float       rad     mrad 

Calibration/DiffractionAlignment/
    alignment_pixel_i       int
    alignment_pixel_j       int
    alignment_moving_path   str         record the path of the vector field that records the center of the diffraction pattern should be moved at each scanning point.
    
Aberration/
    (Not Implemented)
    C1                      float       m       nm          defocus
    A1                      float       m       nm          2-fold astigmatism
    B2                      float       m       nm          axial coma
    A2                      float       m       nm          3-fold astigmatism
    C3                      float       m       um          spherical aberration
    S3                      float       m       um          star aberration
    A3                      float       m       um          4-fold astigmatism
    B4                      float       m       um          axial coma
    D4                      float       m       um          3 lobe aberration
    A4                      float       m       um          5-fold astigmatism
    C5                      float       m       mm          spherical aberration
    A5                      float       m       mm          6-fold astigmatism

Quantify/
    display_vmin            float 
    display_vmax            float 
    display_norm_mode       str         'linear' or 'logarithm'
    display_colormap        str 


.img    metadata structure 
General/
    title                   str         initialized by dataset name, but not necessarily the same.
    original_filename       str         original file name without extension (if this is not the original acquisition image, the file could be a 4D-STEM dataset or other kind of experiment data)
    original_path           str         original file path (if this is not the original acquisition image, the file could be a 4D-STEM dataset or other kind of experiment data)
    authors                 str         in LaTeX format, i.e. Surname1, Name1 and Surname2, Name2 and ...
    notes                   str         may support rich text (html?)
    time                    str         creation time in ISO 8601, 13:29:10
    date                    str         creation date in ISO 8601, 2018-01-28
    time_zone               str         supported by the python-dateutil library, the same as the system
    doi                     str         

FileIO/
    fourd_explorer_version  str         e.g. 0.5.2

Calibration/Space/
    pixel_size_i            float       
    pixel_size_j            float 
    pixel_size_unit         str         e.g. m 
    pixel_size_unit_display str         e.g. nm 
    display_unit_magnify    float       if pixel_size_unit is m (meter), and pixel_size_unit_display is nm (nanometer), the display_unit_magnify should be 1e9

Quantify/
    (Not Implemented)
    value_unit              str         e.g. N/C (electric field)
    value_unit_display      str         e.g. V/m 
    display_unit_magnify    float       if value_unit is m (meter), and value_unit_display is nm (nanometer), the value_unit_magnify should be 1e9
    display_vmin            float 
    display_vmax            float 
    display_norm_mode       str         'linear' or 'logarithm'
    display_colormap        str 

######### If the image is originally acquired from TEM/STEM ##########
AcquisitionInstrument/Microscope/
    (Not Implemented)
    name                    str         e.g. Titan3 Cubed 60-300
    manufacturer            str         e.g. FEI 
    acquisition_mode        str         TEM/STEM
    beam_current            float       A       nA 
    accelerate_voltage      float       V       kV
    probe_area              float       m^2     nm^2
    camera_length           float       m       mm
    convergence_angle       float       rad     mrad        alpha/convergent semi-angle 
    magnification           float
    dwell_time              float       s       ms          Only valid for STEM 
    exposure_time           float       s       s           Only valid for TEM 
    step_size_i             float       m       nm          Only valid for STEM
    step_size_j             float       m       nm          Only valid for STEM 

AcquisitionInstrument/Camera/
    (Not Implemented)
    name                    str         e.g. EMPAD 
    manufacturer            str         e.g. FEI 
    pixel_number_i          int         
    pixel_number_j          int 
    pixel_size_i            float       m       um
    pixel_size_j            float       m       um          

AcquisitionInstrument/AnnularDetector/
    (Not Implemented)
    name                    str         e.g. Panther
    manufacturer            str         e.g. FEI 
    inner_radius            float       m       mm          inner radius of the annular sensor 
    outer_radius            float       m       mm          outer radius of the annular sensor 

AcquisitionInstrument/SegmentedDetector/
    (Not Implemented)
    name                    str         e.g. Panther 
    manufacturer            str         e.g. FEI 
    inner_radius            float       m       mm          inner radius of the annular sensor 
    outer_radius            float       m       mm          outer radius of the annular sensor 
    start_angle             float       rad     deg         the start angle in i-j coordinate system of the segmented detector of the image. For example, if a detector records the right-quadrant signal, its start angle should be 45 deg, while its end angle should be 135 deg. (In i-j coordinate system, the i axis points down)
    end_angle               float       rad     deg         the end angle in i-j coordinate system of the segmented detector of the image. For example, if a detector records the right-quadrant signal, its start angle should be 45 deg, while its end angle should be 135 deg. (In i-j coordinate system, the j axis points right)

AcquisitionInstrument/Stage/
    (Not Implemented)
    tilt_alpha              float       mrad    deg 
    tilt_beta               float       mrad    deg 
    rotation                float       mrad    deg 
    x                       float       m       mm 
    y                       float       m       mm 
    z                       float       m       mm 

Aberration/
    (Not Implemented)
    C1                      float       m       nm          defocus
    A1                      float       m       nm          2-fold astigmatism
    B2                      float       m       nm          axial coma
    A2                      float       m       nm          3-fold astigmatism
    C3                      float       m       um          spherical aberration
    S3                      float       m       um          star aberration
    A3                      float       m       um          4-fold astigmatism
    B4                      float       m       um          axial coma
    D4                      float       m       um          3 lobe aberration
    A4                      float       m       um          5-fold astigmatism
    C5                      float       m       mm          spherical aberration
    A5                      float       m       mm          6-fold astigmatism

######### If the image is related (reconstructed) from 4D-STEM ##########
(
    Copy from FourDSTEM:
    AcquisitionInstrument/  -> FourDSTEM/AcquisitionInstrument/
    Aberration/ -> FourDSTEM/Aberration/
    Calibration/ -> FourDSTEM/Calibration/
    General/ -> FourDSTEM/General/
)

FourDSTEM/General/
    fourd_stem_path         str         the path of the original 4D-STEM dataset

    


.vec        metadata structure 
General/
    title                   str         initialized by dataset name, but not necessarily the same.
    original_name           str         original file name without extension
    original_path           str         original file path
    authors                 str         in LaTeX format, i.e. Surname1, Name1 and Surname2, Name2 and ...
    notes                   str         may support rich text (html?)
    time                    str         creation time in ISO 8601, 13:29:10
    date                    str         creation date in ISO 8601, 2018-01-28
    time_zone               str         supported by the python-dateutil library, the same as the system
    doi                     str         

FileIO/
    fourd_explorer_version  str         e.g. 0.5.2

Calibration/Space/
    pixel_size_i            float       
    pixel_size_j            float 
    pixel_size_unit         str         e.g. m 
    pixel_size_unit_display str         e.g. nm 
    display_unit_magnify    float       if pixel_size_unit is m (meter), and pixel_size_unit_display is nm (nanometer), the display_unit_magnify should be 1e9

Quantify/
    (Not Implemented)
    value_unit              str         e.g. N/C (electric field)
    value_unit_display      str         e.g. V/m 
    display_unit_magnify    float       if value_unit is m (meter), and value_unit_display is nm (nanometer), the value_unit_magnify should be 1e9
    display_length_magnify  float 

######### If the vector field is related (reconstructed from 4D-STEM) ##########
(
    Copy from FourDSTEM:
    AcquisitionInstrument/  -> FourDSTEM/AcquisitionInstrument/
    Aberration/ -> FourDSTEM/Aberration/
    Calibration/ -> FourDSTEM/Calibration/
    General/ -> FourDSTEM/General/
)

FourDSTEM/General/
    fourd_stem_path         str         the path of the original 4D-STEM dataset

######### If the vector field has a related background #########
(
    Copy from Image:
      
)


(Deprecated)

AcquisitionInstrument/EDS/
    (Not Implemented)
    name                    str         
    manufacturer            str 
    azimuth_angle           float       rad     deg
    elevation_angle         float       rad     deg 
    energy_resolution_MnKa  float       eV      eV          The full width at half maximum (FWHM) of the manganese K alpha (Mn Ka) peak. This value is used as a first approximation of the energy resolution of the detector
    live_time               float       s       s           The time spent to record the spectrum, compensated for the dead time of the detector
    real_time               float       s       s 

AcquisitionInstrument/EELS/
    (Not Implemented)
    name                    str         e.g. Enfinium ER 977
    manufacturer            str         e.g. Gatan 
    aperture_size           float       m       mm          The entrance aperture size of the spectrometer
    collection_angle        float       rad     mrad        beta/collection semi-angle
    dwell_time              float       s       ms          Only valid for STEM 
    exposure                float       s       s           Only valid for TEM 
    frame_number            int                             The number of frames/spectra integrated during the acquisition 

    